<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>게시판</title>
    <style>
        html {
            width: 60vw;
            margin-left: 20vw;
            font-family: Arial, sans-serif;
        }

        /* CSS 스타일링 */
        body {
            font-family: Arial, sans-serif;
        }
        .container {
            width: 80%;
            margin: auto;
            padding-top: 20px;
        }
        h1 {
            text-align: center;
        }
        .board-form {
            margin-bottom: 20px;
        }
        .board-item {
            border: 1px solid #ccc;
            margin-bottom: 10px;
            padding: 10px;
        }
    </style>
</head>
<body>

<header>
    <div class="left">
        <!--        <img src="C:\Users\fhawn\Desktop\야구공 로고.png" alt="로고">-->
        <h2>웹페이지 이름</h2>
        <div class="menu">
            <p>일정</p>
            <p>게시판</p>
            <p>기록</p>
        </div>
    </div>

    <div class="right">
        <button>로그인</button>
        <button>회원가입</button>
    </div>
</header>

<div class="container">
    <h1>게시판</h1>

    <!-- 게시글 작성 폼 -->
    <form class="board-form" id="boardForm">
        <label for="title">제목:</label>
        <input type="text" id="title" name="title" required><br>
        <label for="content">내용:</label><br>
        <textarea id="content" name="content" rows="4" required></textarea><br>
        <button type="submit">게시글 작성</button>
    </form>

    <!-- 게시글 목록 -->
    <div id="boardList">
        <!-- 여기에 서버로부터 받아온 게시글 목록을 표시할 것임 -->
    </div>
</div>

<script>
    // JavaScript 코드 작성 (예: AJAX를 사용하여 서버로부터 게시글 목록을 받아와서 표시하는 코드 등)
    // 예시: jQuery를 사용하여 AJAX 요청을 보내고 받아온 데이터를 HTML로 렌더링하는 코드
    $(document).ready(function(){
        // 페이지가 로드되면 초기 게시글 목록을 가져와서 표시
        fetchBoardList();

        // 게시글 작성 폼 제출 이벤트 핸들러
        $("#boardForm").submit(function(event){
            event.preventDefault(); // 기본 이벤트 동작 방지 (페이지 새로고침 방지)

            // 폼 데이터 가져오기
            var formData = {
                title: $("#title").val(),
                content: $("#content").val()
            };

            // AJAX를 통해 서버로 게시글 작성 요청 보내기
            $.ajax({
                type: "POST",
                contentType: "application/json",
                url: "/api/boards",
                data: JSON.stringify(formData),
                success: function(response){
                    // 성공 시 새로운 게시글을 목록에 추가
                    $("#boardList").append("<div class='board-item'>" +
                        "<h3>" + response.title + "</h3>" +
                        "<p>" + response.content + "</p>" +
                        "<p>작성자: " + response.nickname + "</p>" +
                        "<p>작성일: " + response.created_at + "</p>" +
                        "</div>");

                    // 폼 초기화
                    $("#title").val("");
                    $("#content").val("");
                },
                error: function(xhr, status, error){
                    console.error("게시글 작성 실패:", error);
                }
            });
        });
    });

    // 서버로부터 게시글 목록을 가져와서 표시하는 함수
    function fetchBoardList() {
        $.ajax({
            type: "GET",
            url: "/api/boards",
            success: function(response){
                // 서버로부터 받아온 게시글 목록을 반복하여 표시
                response.forEach(function(board){
                    $("#boardList").append("<div class='board-item'>" +
                        "<h3>" + board.title + "</h3>" +
                        "<p>" + board.content + "</p>" +
                        "<p>작성자: " + board.nickname + "</p>" +
                        "<p>작성일: " + board.created_at + "</p>" +
                        "</div>");
                });
            },
            error: function(xhr, status, error){
                console.error("게시글 목록 가져오기 실패:", error);
            }
        });
    }
</script>
</body>
</html>
